# 🎬 Search Movies

בוט טלגרם לחיפוש סרטים במהירות ובנוחות, להצגת פרטים מלאים על סרטים, דירוגים, פוסטרים ועוד – ישירות בתוך הטלגרם.

---

## 📱 מה הבוט עושה?

**Search Movies** הוא בוט טלגרם שמאפשר לך:

- לחפש סרטים לפי שם (בעברית או באנגלית)
- לקבל פרטי סרטים (שם, שנה, תקציר ועוד)
- לשתף קישורים ותוכן בקלות
- להמיר טקסט לקובץ אודיו (TTS)
- להעלות טקסטים ל־Paste (קישור שיתוף נוח)
- להציג מזהי משתמשים/צ׳אטים/מדיה
- להפעיל סטטיסטיקות והגדרות מתקדמות לקבוצות (למנהלים)

---

## 🧾 כל הפקודות הזמינות בבוט


### 🔹 פקודות כלליות

- `/start`  
  התחלת שיחה עם הבוט.  
  בפרטי – מציג הודעת פתיחה, אנימציה קצרה ותפריט בית.  
  בקבוצה – שולח הודעה קצרה: הבוט מוכן לחיפוש סרטים.

- `/help` *(אם קיימת במימוש)*  
  הצגת עזרה כללית על הבוט ועל הפקודות העיקריות.

- הודעת טקסט רגילה בקבוצה *(לפי ההגדרות)*  
  ניתן להגדיר אם כל הודעה תפעיל חיפוש, או רק הודעות שמתחילות בתו מיוחד (למשל `!`).  
  זה נשלט דרך `/settings` (ראו בהמשך).

---

### 🎬 פקודות חיפוש סרטים ותוכן עיקרי

> הפונקציות עצמן נמצאות בפלאגינים אחרים תחת `Tj_Bots`, אבל מבחינת משתמש הבוט – אלה הפקודות המרכזיות:

- `/search` *(אם קיימת במימוש החיפוש)*  
  התחלת חיפוש סרט חדש. אחרי הפקודה – מזינים שם סרט, והבוט מחזיר תוצאות.

- שליחת שם סרט בפרטי  
  הבוט יחפש את הסרט וישלח את התוצאות לפי ההגדרות (כפתורים / טקסט, כמות תוצאות וכו').

- קישורי `start` מיוחדים  
  כאשר לוחצים על קישורי `start` עם פרמטר (למשל `...?start=<id>`), הבוט מביא קובץ שנשמר בדאטהבייס ומעתיק אותו אליך.

---

### 🧩 פקודות אקסטרה

#### 🆔 זיהוי משתמשים/קבוצות/מדיה

ממומש בקובץ `Tj_Bots/extra/id.py`.

- `/id`  
  בפרטי – מציג:
  - שם פרטי ומשפחה
  - שם משתמש
  - מזהה טלגרם (ID)
  - Data Centre (אם זמין)

  בקבוצה – מציג:
  - מזהה הקבוצה
  - אם תגבת להודעה – מזהה המשתמש שעליו הגבתי + מזהה המדיה (אם יש), כמו תמונה/וידאו/קובץ וכו׳.
  - אם לא תגבת – מזהה שלך + מזהה מדיה אם קיימת בהודעה שלך.

- `/info` *(המשך המימוש ��קובץ, אם פעיל)*  
  הצגת מידע נוסף על משתמש/קבוצה לפי מימוש הפקודה בקוד (למשל ��רטי משתמש מלאים).

#### 🗣️ המרת טקסט לאודיו (TTS)

ממומש בקובץ `Tj_Bots/extra/tts.py`.

- `/tts`  
  שימושים:
  - להגיב עם `/tts` על הודעה – הבוט ייקח את הטקסט בהודעה וימיר אותו לאודיו (MP3).
  - או לשלוח `/tts טקסט כלשהו` – ולקבל קובץ אודיו של הטקסט הזה.

  הבוט מזהה אוטומטית אם הטקסט בעברית או באנגלית, ומגדיר שפה בהתאם.

#### 📎 העלאת טקסט ל־Paste

ממומש בקובץ `Tj_Bots/extra/paste.py`.

- `/paste`, `/pasty`, `/tgpaste`  
  שימושים:
  - `/paste טקסט כלשהו` – מעלה את הטקסט ל��Pasty ומחזיר לך קישור.
  - להגיב על הודעת טקסט עם `/paste` – מעלה את תוכן ההודעה.
  - להגיב על קובץ טקסט קטן (עד 1MB) – הבוט יו��יד את הקובץ, יקרא אותו ויעלה את התוכן ל־Pasty.

  הבוט מחזיר:
  - קישור לצפייה
  - קישור לתוכן גולמי (raw)

#### 🔗 שיתוף טקסט בקלות

ממומש בקובץ `Tj_Bots/extra/share_text.py`.

- `/share`, `/share_text`, `/sharetext`  
  שימושים:
  - להגיב על הודעת טקסט/כיתוב – הבוט ייצור קישור שיתוף לטלגרם (`https://t.me/share/url?...`).
  - או לשלוח `/share טקסט כלשהו`.

  הבוט מחזיר:
  - קישור שיתוף מוכן
  - כפתור "📤 שתף עכשיו"
  - כפתור "❌ סגור" (callback)

---

### 🧹 פקודות ניקוי (למנהלים בלבד)

ממומש בקובץ `Tj_Bots/clean.py`.

- `/clean` *(למשתמשים ברשימת `ADMINS` בלבד)*  
  פותח תפריט ניקוי:

  - ניקוי כל הקבצים מהדאטהבייס
  - ניקוי כל המשתמשים
  - ניקוי כל הקבוצות
  - ביטול פעולה

  לפני כל פעולה הרסנית – יש אימות קפצ׳ה (חישוב פשוט) כדי לוודא שלא לוחצים בטעות.

---

### 📊 סטטיסטיקות (למנהלים בלבד)

ממומש בקובץ `Tj_Bots/stats.py`.

- `/stats` *(רק למנהלים המופיעים ב־`ADMINS`)*  
  הבוט אוסף נתונים מהדאטהבייס ומציג:

  - מספר הקבצים השמורים
  - מספר המשתמשים
  - מספר הקבוצות

  התוצאה נשלחת כתמונה (מ־`PHOTO_URL`) עם כיתוב סטטיסטיקות יפה.

---

### ⚙️ הגדרות (לקבוצות, למנהלים בלבד)

ממומש בקובץ `Tj_Bots/settings.py`.

- `/settings` *(רק בקבוצות, ורק למנהלים אמיתיים בקבוצה)*  
  פותח תפריט הגדרות אינליין לצ׳אט הנוכחי:

  אפשרויות:
  - **מספר תוצאות לעמוד** – למשל 5 או 10 תוצאות חיפוש.
  - **מצב תצוגה** –  
    - `כפתורים` – תוצאות חיפוש עם כפתורי אינליין.  
    - `טקסט` – תוצאות חיפוש נשלחות כטקסט רגיל.
  - **טריגר חיפוש** –  
    - `כל הודעה` – כל הודעת טקסט מפעילה חיפוש.  
    - `רק עם !` – רק הודעות שמתחילות בתו מוגדר (כמו `!`) מפעילות חיפוש.

ההגדרות נשמרות בדאטהבייס לפי צ׳אט וניתן לשנות אותן בכל רגע.

---

## 🛠️ טכנולוגיות וסטאק

המידע להלן מבוסס על הקבצים בפועל במאגר:

- שפת תכנות: **Python**
- ספריות עיקריות (מתוך `requirements.txt`):
  - `pyrogram` – ספריית לקוח ל־Telegram Bot / Userbot
  - `tgcrypto` – האצת הצפנה עבור Pyrogram
  - `motor` – לקוח MongoDB אסינכרוני (לעבודה עם הדאטהבייס)
  - `python-dotenv` – טעינת משתני סביבה מקובץ `.env`
  - `dnspython` – תמיכה ב־DNS (לעבודה עם MongoDB וכדומה)
  - `requests` – בקשות HTTP (למשל עבור Pasty)
  - `gTTS` – המרת טקסט לדיבור (Google Text-to-Speech)

- תשתיות ותצורה:
  - `Dockerfile` + `docker-compose.yml` – להרצה קלה בקונטיינרים (כולל בוט + MongoDB).
  - קובץ `config.py` – הגדרות בוט, טוקנים, ערוצי לוגים, תמונות וכדומה.
  - קובץ `database.py` – עבודה מול MongoDB (משתמשים, קבוצות, קבצים, הגדרות ועוד).

---

## 🚀 התקנה והרצה למפתחים

> מיועד למי שרוצה להריץ או לערוך את הבוט בעצמו.

### 1️⃣ שכפול המאגר

```bash
git clone https://github.com/Tj-Bots/Search-Movies.git
cd Search-Movies
```

### 2️⃣ יצירת סביבת הרצה והתקנת תלויות

```bash
pip install -r requirements.txt
```

או בהרצה בדוקר (מומלץ לשרת):

```bash
docker-compose up --build -d
```

### 3️⃣ הגדרת משתני סביבה

יצירת קובץ `.env` (או הגדרה בסביבת ההפעלה), עם משתנים כגון:

```bash
API_ID=your_telegram_api_id
API_HASH=your_telegram_api_hash
BOT_TOKEN=your_bot_token
MONGODB_URI=your_mongodb_uri
LOG_CHANNEL=your_log_channel_id
UPDATE_CHANNEL=your_update_channel_username_without_@
REQUEST_GROUP=your_request_group_link_or_username
PHOTO_URL=url_to_stats_or_welcome_photo
ADMINS=comma_separated_admin_ids
```

(הפורמט המדויק – לפי ההגדרות בקובץ `config.py`.)

### 4️⃣ הרצת הבוט

ללא Docker:

```bash
python bot.py
```

עם Docker Compose:

```bash
docker-compose up -d
```

---

## 🤝 תרומה לפרויקט

תרומות ובקשות פיצ׳רים תמיד מתקבלות בשמחה:

1. בצעו Fork למאגר.
2. צרו ענף חדש עבור השינוי:  
   `git checkout -b feature/YourFeature`
3. בצעו שינויים ו־Commit עם הודעות ברורות.
4. בצעו Push לענף שלכם.
5. פתחו Pull Request למאגר הראשי.

---

## 📄 רישיון

במידה וקיים קובץ `LICENSE` במאגר – השימוש בקוד כפוף לתנאים שבו.  
מומלץ לקרוא לפני שימוש בקוד בפרויקטים אחרים.

---

## 👤 מחבר

הבוט פותח ומנוהל על ידי:  
[Tj-Bots](https://github.com/Tj-Bots)

---

## ⭐ תמיכה ויצירת קשר

- מצאתם באג? יש רעיון לשיפור?  
  פתחו [Issue במאגר](https://github.com/Tj-Bots/Search-Movies/issues).
- אם הבוט או הקוד עזרו לכם – תנו ⭐ במאגר GitHub, זה עוזר מאוד.

---

בהצלחה, ושיהיה צפייה מהנה! 🎥🍿
